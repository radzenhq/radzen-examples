@page "/profile"
@layout MainLayout
@inherits RadzenCrm.Pages.ProfileComponent

@using Radzen
@using Radzen.Blazor
@using RadzenCrm.Models.Crm
@using Microsoft.AspNetCore.Identity
@using RadzenCrm.Models
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

@inject Microsoft.Extensions.Localization.IStringLocalizer<Profile> L
<RadzenContent Container="main">
  <ChildContent>
    <RadzenHeading Size="H1" Text="@L["pageTitle.Text"]">
    </RadzenHeading>
    <RadzenTabs>
      <Tabs>
        <RadzenTabsItem Selected="true" Text="@L["undefined"]">
          <ChildContent>
            <RadzenTemplateForm Data="@(user)" TItem="RadzenCrm.Models.ApplicationUser" Visible="@(user != null)" Submit="@TemplateForm0Submit">
              <ChildContent>
                <div class="row">
                  <div class="col-md-3">
                    <RadzenLabel Component="textBox1" style="width: 100%" Text="First Name">
                    </RadzenLabel>
                  </div>
                  <div class="col-md-9">
                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@(user.FirstName)" Name="TextBox1">
                    </RadzenTextBox>
                    <RadzenRequiredValidator Component="TextBox1" style="position: absolute" Text="@L["requiredValidator1.Text"]">
                    </RadzenRequiredValidator>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <RadzenLabel Component="textbox0" style="width: 100%" Text="Last Name">
                    </RadzenLabel>
                  </div>
                  <div class="col-md-9">
                    <RadzenTextBox style="display: block; width: 100%" @bind-Value="@(user.LastName)" Name="Textbox0">
                    </RadzenTextBox>
                    <RadzenRequiredValidator Component="Textbox0" style="position: absolute" Text="@L["requiredValidator0.Text"]">
                    </RadzenRequiredValidator>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <RadzenLabel Component="fileInput0" style="width: 100%" Text="Picture">
                    </RadzenLabel>
                  </div>
                  <div class="col-md-9">
                    <RadzenFileInput style="display: block" @bind-Value="@(user.Picture)" Name="FileInput0">
                    </RadzenFileInput>
                    <RadzenRequiredValidator Component="FileInput0" style="position: absolute" Text="@L["requiredValidator2.Text"]">
                    </RadzenRequiredValidator>
                  </div>
                </div>
                <div class="row">
                  <div class="offset-sm-3 col-md-9">
                    <RadzenButton ButtonType="ButtonType.Submit" Icon="save" Text="@L["button2.Text"]">
                    </RadzenButton>
                  </div>
                </div>
              </ChildContent>
            </RadzenTemplateForm>
          </ChildContent>
        </RadzenTabsItem>
        <RadzenTabsItem Selected="false" Text="@L["undefined"]">
          <ChildContent>
            <RadzenTemplateForm Action="/account/changepassword" Data="@(user)" TItem="ApplicationUser" Method="post" Visible="@(user != null)">
              <ChildContent>
                <div style="margin-bottom: 1rem" class="row">
                  <div class="col-md-3">
                    <RadzenLabel Component="OldPassword" style="width: 100%" Text="Old Password">
                    </RadzenLabel>
                  </div>
                  <div class="col-md-9">
                    <RadzenPassword style="display: block; width: 100%" Name="OldPassword">
                    </RadzenPassword>
                    <RadzenRequiredValidator Component="OldPassword" style="position: absolute" Text="@L["OldPasswordRequiredValidator.Text"]">
                    </RadzenRequiredValidator>
                  </div>
                </div>
                <div style="margin-bottom: 1rem" class="row">
                  <div class="col-md-3">
                    <RadzenLabel Component="NewPassword" style="width: 100%" Text="New Password">
                    </RadzenLabel>
                  </div>
                  <div class="col-md-9">
                    <RadzenPassword style="display: block; width: 100%" Name="NewPassword">
                    </RadzenPassword>
                    <RadzenRequiredValidator Component="NewPassword" style="position: absolute" Text="@L["NewPasswordRequiredValidator.Text"]">
                    </RadzenRequiredValidator>
                  </div>
                </div>
                <div style="margin-bottom: 1rem" class="row">
                  <div class="col-md-3">
                    <RadzenLabel Component="ConfirmPassword" style="width: 100%" Text="Confirm password">
                    </RadzenLabel>
                  </div>
                  <div class="col-md-9">
                    <RadzenPassword style="display: block; width: 100%" Name="ConfirmPassword">
                    </RadzenPassword>
                    <RadzenRequiredValidator Component="ConfirmPassword" style="position: absolute" Text="@L["ConfirmPasswordRequiredValidator.Text"]">
                    </RadzenRequiredValidator>
                  </div>
                </div>
                <div class="row">
                  <div class="col offset-sm-3">
                    <RadzenButton ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit" Icon="save" Text="@L["button0.Text"]">
                    </RadzenButton>
                    <RadzenButton ButtonStyle="ButtonStyle.Light" Text="@L["button1.Text"]" Click="@Button1Click">
                    </RadzenButton>
                  </div>
                </div>
              </ChildContent>
            </RadzenTemplateForm>
          </ChildContent>
        </RadzenTabsItem>
      </Tabs>
    </RadzenTabs>
  </ChildContent>
</RadzenContent>
